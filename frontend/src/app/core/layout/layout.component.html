<ng-container *ngIf="isAuthenticated; else authRoutes">
<!--begin::App-->
<div class="d-flex flex-column flex-root app-root" id="kt_app_root">
  <!--begin::Page-->
  <div class="app-page flex-column flex-column-fluid" id="kt_app_page">
    <!--begin::Header-->
    <div id="kt_app_header" class="app-header">
      <!--begin::Header container-->
      <div
        class="app-container container-fluid d-flex align-items-stretch justify-content-between"
        id="kt_app_header_container"
      >
        <!--begin::Sidebar mobile toggle-->
        <div
          class="d-flex align-items-center d-lg-none ms-n3 me-1 me-md-2"
          title="Show sidebar menu"
        >
          <div
            class="btn btn-icon btn-active-color-primary w-35px h-35px"
            id="kt_app_sidebar_mobile_toggle"
          >
            <i class="ki-duotone ki-abstract-14 fs-2 fs-md-1">
              <span class="path1"></span>
              <span class="path2"></span>
            </i>
          </div>
        </div>
        <!--end::Sidebar mobile toggle-->
        <!--begin::Mobile logo-->
        <div class="d-flex align-items-center flex-grow-1 flex-lg-grow-0">
          <a href="../../demo1/dist/index.html" class="d-lg-none">
            <img
              alt="Logo"
              src="assets/media/logos/default-small.svg"
              class="h-30px"
            />
          </a>
        </div>
        <!--end::Mobile logo-->
        <!--begin::Header wrapper-->
        <div
          class="d-flex align-items-stretch justify-content-end flex-lg-grow-1"
          id="kt_app_header_wrapper"
        >
          <!--begin::Navbar-->
          <div class="app-navbar flex-shrink-0">
            <!--begin::Customizer toggle-->
            <div class="app-navbar-item ms-1 ms-md-3">
              <button
                type="button"
                class="btn btn-icon btn-custom btn-icon-muted btn-active-light btn-active-color-primary w-30px h-30px w-md-40px h-md-40px"
                aria-label="Open template customizer"
                (click)="toggleCustomizer(true)"
              >
                <i class="ki-duotone ki-setting-2 fs-2 fs-lg-1">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                  <span class="path4"></span>
                </i>
              </button>
            </div>
            <!--end::Customizer toggle-->
            <!--begin::Theme mode-->
            <div class="app-navbar-item ms-1 ms-md-3">
              <!--begin::Menu toggle-->
              <a
                href="#"
                class="btn btn-icon btn-custom btn-icon-muted btn-active-light btn-active-color-primary w-30px h-30px w-md-40px h-md-40px"
                data-kt-menu-trigger="{default:'click', lg: 'hover'}"
                data-kt-menu-attach="parent"
                data-kt-menu-placement="bottom-end"
              >
                <i class="ki-duotone ki-night-day theme-light-show fs-2 fs-lg-1">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                  <span class="path4"></span>
                  <span class="path5"></span>
                  <span class="path6"></span>
                  <span class="path7"></span>
                  <span class="path8"></span>
                  <span class="path9"></span>
                  <span class="path10"></span>
                </i>
                <i class="ki-duotone ki-moon theme-dark-show fs-2 fs-lg-1">
                  <span class="path1"></span>
                  <span class="path2"></span>
                </i>
              </a>
              <!--begin::Menu toggle-->
              <!--begin::Menu-->
              <div
                class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-title-gray-700 menu-icon-gray-500 menu-active-bg menu-state-color fw-semibold py-4 fs-base w-175px"
                data-kt-menu="true"
                data-kt-element="theme-mode-menu"
              >
                <ng-container *ngIf="themeMode$ | async as themeMode">
                  <div
                    *ngFor="let theme of themeModes"
                    class="menu-item px-3 my-0"
                  >
                    <a
                      href="#"
                      class="menu-link px-3 py-2"
                      [class.active]="themeMode === theme.value"
                      (click)="$event.preventDefault(); changeTheme(theme.value)"
                    >
                      <span class="menu-icon">
                        <i class="{{ theme.icon }} fs-2">
                          <span class="path1"></span>
                          <span class="path2"></span>
                          <span class="path3" *ngIf="theme.value === 'light'"></span>
                          <span class="path4" *ngIf="theme.value === 'light'"></span>
                          <span class="path5" *ngIf="theme.value === 'light'"></span>
                          <span class="path6" *ngIf="theme.value === 'light'"></span>
                          <span class="path7" *ngIf="theme.value === 'light'"></span>
                          <span class="path8" *ngIf="theme.value === 'light'"></span>
                          <span class="path9" *ngIf="theme.value === 'light'"></span>
                          <span class="path10" *ngIf="theme.value === 'light'"></span>
                          <span class="path3" *ngIf="theme.value === 'system'"></span>
                          <span class="path4" *ngIf="theme.value === 'system'"></span>
                        </i>
                      </span>
                      <span class="menu-title">{{ theme.label }}</span>
                      <span
                        class="badge badge-light-success fw-bold fs-8 ms-2"
                        *ngIf="themeMode === theme.value"
                      >
                        Active
                      </span>
                    </a>
                  </div>
                </ng-container>
              </div>
              <!--end::Menu-->
            </div>
            <!--end::Theme mode-->
            <!--begin::User menu-->
            <div
              class="app-navbar-item ms-1 ms-md-3"
              id="kt_header_user_menu_toggle"
            >
              <!--begin::Menu wrapper-->
              <div
                class="cursor-pointer symbol symbol-30px symbol-md-40px"
                data-kt-menu-trigger="{default: 'click', lg: 'hover'}"
                data-kt-menu-attach="parent"
                data-kt-menu-placement="bottom-end"
              >
                <img src="assets/media/avatars/300-1.jpg" alt="user" />
              </div>
              <!--begin::User account menu-->
              <div
                class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg menu-state-color fw-semibold py-4 fs-6 w-275px"
                data-kt-menu="true"
              >
                <!--begin::Menu item-->
                <div class="menu-item px-3">
                  <div class="menu-content d-flex align-items-center px-3">
                    <!--begin::Avatar-->
                    <div class="symbol symbol-50px me-5">
                      <img alt="Logo" src="assets/media/avatars/300-1.jpg" />
                    </div>
                    <!--end::Avatar-->
                    <!--begin::Username-->
                    <div class="d-flex flex-column">
                    <div class="fw-bold d-flex align-items-center fs-5">
                      {{ session?.displayName || 'User' }}
                      <span
                        class="badge badge-light-success fw-bold fs-8 px-2 py-1 ms-2"
                        >{{ session?.role || 'Member' }}</span
                      >
                    </div>
                    <a
                      [attr.href]="session?.email ? 'mailto:' + session?.email : null"
                      class="fw-semibold text-muted text-hover-primary fs-7"
                      >{{ session?.email || 'user@qcharity.test' }}</a
                    >
                  </div>
                    <!--end::Username-->
                  </div>
                </div>
                <!--end::Menu item-->
                <!--begin::Menu separator-->
                <div class="separator my-2"></div>
                <!--end::Menu separator-->
               
              
              
                <!--begin::Menu item-->
                <div
                  class="menu-item px-5"
                  data-kt-menu-trigger="{default: 'click', lg: 'hover'}"
                  data-kt-menu-placement="left-start"
                  data-kt-menu-offset="-15px, 0"
                >
                  <a href="#" class="menu-link px-5">
                    <span class="menu-title position-relative"
                      >Language
                      <span
                        class="fs-8 rounded bg-light px-3 py-2 position-absolute translate-middle-y top-50 end-0"
                        >English
                        <img
                          class="w-15px h-15px rounded-1 ms-2"
                          src="assets/media/flags/united-states.svg"
                          alt="" /></span
                    ></span>
                  </a>
                  <!--begin::Menu sub-->
                  <div class="menu-sub menu-sub-dropdown w-175px py-4">
                    <!--begin::Menu item-->
                    <div class="menu-item px-3">
                      <a
                        href="../../demo1/dist/account/settings.html"
                        class="menu-link d-flex px-5 active"
                      >
                        <span class="symbol symbol-20px me-4">
                          <img
                            class="rounded-1"
                            src="assets/media/flags/united-states.svg"
                            alt=""
                          /> </span
                        >English</a
                      >
                    </div>
                    <!--end::Menu item-->
                    <!--begin::Menu item-->
                    <div class="menu-item px-3">
                      <a
                        href="../../demo1/dist/account/settings.html"
                        class="menu-link d-flex px-5"
                      >
                        <span class="symbol symbol-20px me-4">
                          <img
                            class="rounded-1"
                            src="assets/media/flags/spain.svg"
                            alt=""
                          /> </span
                        >Arabic</a
                      >
                    </div>
                    <!--end::Menu item-->
                  </div>
                  <!--end::Menu sub-->
                </div>
                <!--end::Menu item-->
              
                <!--end::Menu item-->
                <!--begin::Menu item-->
                <div class="menu-item px-5">
                  <button type="button" class="menu-link px-5 w-100 text-start" (click)="logout()">
                    Sign Out
                  </button>
                </div>
                <!--end::Menu item-->
              </div>
              <!--end::User account menu-->
              <!--end::Menu wrapper-->
            </div>
            <!--end::User menu-->
            <!--begin::Header menu toggle-->
            <div
              class="app-navbar-item d-lg-none ms-2 me-n2"
              title="Show header menu"
            >
              <div
                class="btn btn-flex btn-icon btn-active-color-primary w-30px h-30px"
                id="kt_app_header_menu_toggle"
              >
                <i class="ki-duotone ki-element-4 fs-1">
                  <span class="path1"></span>
                  <span class="path2"></span>
                </i>
              </div>
            </div>
            <!--end::Header menu toggle-->
          </div>
          <!--end::Navbar-->
        </div>
        <!--end::Header wrapper-->
      </div>
      <!--end::Header container-->
    </div>
    <!--end::Header-->
    <!--begin::Wrapper-->
    <div class="app-wrapper flex-column flex-row-fluid" id="kt_app_wrapper">
      <!--begin::Sidebar-->
      <app-sidebar
        [currentRole]="currentRole"
        [menuItems]="sidebarMenu"
        [roles]="roles"
        (roleChange)="onRoleChange($event)"
      ></app-sidebar>
      <!--end::Sidebar-->
      <!--begin::Main-->
      <div class="app-main flex-column flex-row-fluid" id="kt_app_main">
        <div class="d-flex flex-column flex-column-fluid">
          <div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
            <div
              id="kt_app_toolbar_container"
              class="app-container container-fluid d-flex flex-stack"
            >
              <div
                class="page-title d-flex flex-column justify-content-center flex-wrap me-3"
              >
                <h1
                  class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0"
                >
                  {{ activePageTitle }}
                </h1>
                <ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
                  <li class="breadcrumb-item text-muted">
                    <a [routerLink]="['/']" class="text-muted text-hover-primary">Home</a>
                  </li>
                  <li class="breadcrumb-item">
                    <span class="bullet bg-gray-400 w-5px h-2px"></span>
                  </li>
                  <li class="breadcrumb-item text-muted">{{ activePageTitle }}</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="app-content flex-column-fluid" id="kt_app_content">
            <div class="app-container container-fluid">
              <router-outlet />
            </div>
          </div>
        </div>
      </div>
      <!--end::Main-->
      <!--begin::Footer-->
      <div id="kt_app_footer" class="app-footer">
        <div
          class="app-container container-fluid d-flex flex-column flex-md-row flex-center flex-md-stack py-3"
        >
          <div class="text-dark order-2 order-md-1">
            <span class="text-muted fw-semibold me-1">2024Â©</span>
            <a href="#" class="text-gray-800 text-hover-primary">Qatar Charity</a>
          </div>
          <ul class="menu menu-gray-600 menu-hover-primary fw-semibold order-1">
            <li class="menu-item">
              <a class="menu-link px-2" href="#">About</a>
            </li>
            <li class="menu-item">
              <a class="menu-link px-2" href="#">Support</a>
            </li>
            <li class="menu-item">
              <a class="menu-link px-2" href="#">Purchase</a>
            </li>
          </ul>
        </div>
      </div>
      <!--end::Footer-->
    </div>
    <!--end::Wrapper-->
  </div>
  <!--end::Page-->
</div>
<!--end::App-->

<!--begin::Scrolltop-->
<div id="kt_scrolltop" class="scrolltop" data-kt-scrolltop="true">
  <i class="ki-duotone ki-arrow-up">
    <span class="path1"></span>
    <span class="path2"></span>
  </i>
</div>
<!--end::Scrolltop-->

<!--begin::Template Customizer-->
<div
  class="template-customizer"
  [class.template-customizer--open]="isCustomizerOpen"
  aria-hidden="true"
  aria-label="Template customizer"
>
  <div class="template-customizer__header">
    <div>
      <h3 class="template-customizer__title mb-1">Template Customizer</h3>
      <p class="template-customizer__subtitle mb-0">Customize and preview in real time</p>
    </div>
    <div class="d-flex align-items-center gap-2">
      <button type="button" class="btn btn-sm btn-light" (click)="setPrimaryColor(getPrimaryColor())">
        <i class="ki-duotone ki-arrows-circle fs-5">
          <span class="path1"></span>
          <span class="path2"></span>
        </i>
      </button>
      <button type="button" class="btn btn-icon btn-sm btn-light" aria-label="Close customizer" (click)="toggleCustomizer(false)">
        <i class="ki-duotone ki-cross fs-3">
          <span class="path1"></span>
          <span class="path2"></span>
        </i>
      </button>
    </div>
  </div>

  <div class="template-customizer__body">
    <div class="template-customizer__section">
      <span class="badge badge-light-primary fs-7 fw-semibold text-uppercase">Theming</span>
    </div>

    <div class="template-customizer__section">
      <h6 class="fw-semibold mb-3">Primary Color</h6>
      <div class="d-flex flex-wrap gap-2">
        <button
          type="button"
          class="template-customizer__color"
          *ngFor="let color of ['#0d6efd', '#784afa', '#eab308', '#f97316', '#ef4444', '#22c55e']"
          [style.backgroundColor]="color"
          [class.template-customizer__color--active]="selectedPrimaryColor === color"
          (click)="setPrimaryColor(color)"
        >
          <span class="visually-hidden">Set primary color {{ color }}</span>
        </button>

        <label class="template-customizer__color template-customizer__color--picker" [class.template-customizer__color--active]="false">
          <input
            type="color"
            class="template-customizer__color-input"
            [value]="selectedPrimaryColor"
            (input)="setPrimaryColor($any($event.target).value)"
            aria-label="Choose custom primary color"
          />
          <i class="ki-duotone ki-pencil fs-2 text-muted">
            <span class="path1"></span>
            <span class="path2"></span>
          </i>
        </label>
      </div>
    </div>

    <div class="template-customizer__section">
      <h6 class="fw-semibold mb-3">Theme</h6>
      <div class="d-flex flex-wrap gap-3">
        <button
          type="button"
          class="template-customizer__option"
          *ngFor="let theme of themeModes"
          [class.template-customizer__option--active]="(themeMode$ | async) === theme.value"
          (click)="changeTheme(theme.value)"
        >
          <i class="{{ theme.icon }} fs-2">
            <span class="path1"></span>
            <span class="path2"></span>
            <span class="path3" *ngIf="theme.value === 'light'"></span>
            <span class="path4" *ngIf="theme.value === 'light'"></span>
            <span class="path5" *ngIf="theme.value === 'light'"></span>
            <span class="path6" *ngIf="theme.value === 'light'"></span>
            <span class="path7" *ngIf="theme.value === 'light'"></span>
            <span class="path8" *ngIf="theme.value === 'light'"></span>
            <span class="path9" *ngIf="theme.value === 'light'"></span>
            <span class="path10" *ngIf="theme.value === 'light'"></span>
            <span class="path3" *ngIf="theme.value === 'system'"></span>
            <span class="path4" *ngIf="theme.value === 'system'"></span>
          </i>
          <span class="fw-semibold">{{ theme.label }}</span>
        </button>
      </div>
    </div>

    <div class="template-customizer__section">
      <h6 class="fw-semibold mb-3">Skins</h6>
      <div class="d-flex flex-wrap gap-3">
        <button
          type="button"
          class="template-customizer__option"
          [class.template-customizer__option--active]="selectedSkin === 'default'"
          (click)="setSkin('default')"
        >
          <i class="ki-duotone ki-abstract-47 fs-2">
            <span class="path1"></span>
            <span class="path2"></span>
            <span class="path3"></span>
            <span class="path4"></span>
          </i>
          <span class="fw-semibold">Default</span>
        </button>
        <button
          type="button"
          class="template-customizer__option"
          [class.template-customizer__option--active]="selectedSkin === 'bordered'"
          (click)="setSkin('bordered')"
        >
          <i class="ki-duotone ki-design-1 fs-2">
            <span class="path1"></span>
            <span class="path2"></span>
          </i>
          <span class="fw-semibold">Bordered</span>
        </button>
      </div>
    </div>

    <div class="template-customizer__section d-flex align-items-center justify-content-between">
      <div>
        <h6 class="fw-semibold mb-1">Semi Dark</h6>
        <p class="mb-0 text-muted">Change layout appearance</p>
      </div>
      <div class="form-check form-switch">
        <input
          class="form-check-input"
          type="checkbox"
          role="switch"
          id="semiDarkSwitch"
          [checked]="isSemiDark"
          (change)="toggleSemiDark($any($event.target).checked)"
        />
      </div>
    </div>
  </div>
</div>

<div
  class="template-customizer__backdrop"
  *ngIf="isCustomizerOpen"
  (click)="toggleCustomizer(false)"
  aria-hidden="true"
></div>
<!--end::Template Customizer-->
</ng-container>

<ng-template #authRoutes>
  <router-outlet />
</ng-template>
